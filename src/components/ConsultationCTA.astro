---
// Reusable CTA section â€” matches Figma sage-green gradient design
---

<section class="pt-10 md:pt-16 pb-6 md:pb-10 px-6">
  <div class="max-w-6xl mx-auto rounded-xl overflow-hidden" style="background: linear-gradient(260deg, #8BAA94 33%, #60936F 100%);">
    <div class="grid md:grid-cols-2 gap-8 p-10 md:pt-10 md:pb-14 md:px-16 items-start">
      <!-- Left: Content -->
      <div>
        <!-- H2 - Section: Montserrat SemiBold 36/60, mobile: 28/36 -->
        <h2 class="font-aktiv text-[21px] md:text-[36px] font-semibold leading-[30px] md:leading-[60px] tracking-[1.4px] md:tracking-[1.8px] mb-4" style="color: white;">
          Schedule a<br />Free Consultation
        </h2>
        <!-- Script - Medium: Silver South Script 48/55, mobile: 32/38 -->
        <p class="font-script text-white text-[32px] md:text-[48px] leading-[38px] md:leading-[55px] tracking-[1.6px] md:tracking-[2.4px] mb-6 md:mb-[74px]">
          Tell us more about you
        </p>
        <!-- Body Regular: Aktiv Grotesk Light 16/28, mobile: 15/24 -->
        <p class="text-white text-[15px] md:text-[16px] leading-[24px] md:leading-[28px] tracking-[1.5px] md:tracking-[1.6px] font-montserrat font-light">
          All of our services are designed to ensure your success. Each brand is unique! Schedule a FREE consultation so we can learn about your brand and goals!
        </p>
      </div>

      <!-- Right: Form -->
      <div>
        <form id="consultation-form" class="space-y-4">
          <input
            type="text"
            id="cta-name"
            name="name"
            placeholder="Name"
            required
            class="w-full px-5 py-3.5 rounded-lg border border-gray-200 bg-white focus:outline-none focus:border-kd-gold text-base font-montserrat font-light text-kd-navy placeholder:text-gray-500"
          />
          <input
            type="email"
            id="cta-email"
            name="email"
            placeholder="Email Address"
            required
            class="w-full px-5 py-3.5 rounded-lg border border-gray-200 bg-white focus:outline-none focus:border-kd-gold text-base font-montserrat font-light text-kd-navy placeholder:text-gray-500"
          />
          <textarea
            id="cta-message"
            name="message"
            placeholder="Message"
            rows="4"
            class="w-full px-5 py-3.5 rounded-lg border border-gray-200 bg-white focus:outline-none focus:border-kd-gold text-base font-montserrat font-light text-kd-navy resize-none placeholder:text-gray-500"
          ></textarea>
          <button
            type="submit"
            id="cta-submit-btn"
            class="btn-navy w-full py-4 px-5 rounded-lg text-base font-montserrat font-medium tracking-wider flex items-center justify-between"
          >
            <span id="cta-submit-text">SUBMIT</span>
            <img src="/images/global/play.png" alt="" class="w-5 h-5" />
          </button>
        </form>
        <!-- Success message (outside form so it stays visible when form hides) -->
        <div id="cta-success" class="hidden text-center py-8">
          <div class="w-14 h-14 mx-auto mb-4 rounded-full bg-white/20 flex items-center justify-center">
            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
          </div>
          <p class="text-white text-[18px] font-montserrat font-medium tracking-wide">
            Thank you! We'll be in touch soon.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    var form = document.getElementById('consultation-form');
    if (!form) return;

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      var name = document.getElementById('cta-name').value;
      var email = document.getElementById('cta-email').value;
      var message = document.getElementById('cta-message').value;
      var submitBtn = document.getElementById('cta-submit-btn');
      var submitText = document.getElementById('cta-submit-text');
      var successMsg = document.getElementById('cta-success');

      // Disable button and show loading
      submitBtn.disabled = true;
      submitText.textContent = 'Sending...';

      var companyId = 'SqUgaK';
      var listId = 'W3XhAb';
      var apiHeaders = {
        'Content-Type': 'application/json',
        'revision': '2024-10-15',
      };

      // Step 1: Create/update profile with name, message, and custom properties
      fetch('https://a.klaviyo.com/client/profiles/?company_id=' + companyId, {
        method: 'POST',
        headers: apiHeaders,
        body: JSON.stringify({
          data: {
            type: 'profile',
            attributes: {
              email: email,
              first_name: name.split(' ')[0],
              last_name: name.split(' ').slice(1).join(' ') || '',
              properties: {
                consultation_message: message,
                consultation_request: true,
                source: 'website_consultation_form',
              },
            },
          },
        }),
      }).then(function() {
        // Step 2: Always subscribe to list
        return fetch('https://a.klaviyo.com/client/subscriptions/?company_id=' + companyId, {
          method: 'POST',
          headers: apiHeaders,
          body: JSON.stringify({
            data: {
              type: 'subscription',
              attributes: {
                custom_source: 'Website Consultation Form',
                profile: {
                  data: {
                    type: 'profile',
                    attributes: {
                      email: email,
                    },
                  },
                },
              },
              relationships: {
                list: {
                  data: {
                    type: 'list',
                    id: listId,
                  },
                },
              },
            },
          }),
        });
      }).then(function() {
        // Show success
        form.classList.add('hidden');
        successMsg.classList.remove('hidden');
      }).catch(function() {
        // Show error
        submitText.textContent = 'Something went wrong. Try again.';
        submitBtn.disabled = false;
        setTimeout(function() {
          submitText.textContent = 'SUBMIT';
        }, 3000);
      });
    });
  });
</script>
